{"asctime": "2025-07-22 20:56:38,484", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: user_id=414ed6ae-a2aa-4548-b73a-66ce240c0089, route=/api/appointments, method=GET, company_code=LNV"}
{"asctime": "2025-07-22 20:56:39,636", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: True"}
{"asctime": "2025-07-22 20:56:39,637", "levelname": "ERROR", "name": "service.user_access", "message": "\ud83d\udd25 Exception occurred in check_access: 'SingleAPIResponse[TypeVar]' object has no attribute 'error'", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Projects\\TH-WelnessSystems\\app\\api\\v1\\users\\check_access.py\", line 47, in check_access\n    if response.error:\n       ^^^^^^^^^^^^^^\n  File \"C:\\Projects\\TH-WelnessSystems\\venv\\Lib\\site-packages\\pydantic\\main.py\", line 989, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\nAttributeError: 'SingleAPIResponse[TypeVar]' object has no attribute 'error'"}
{"asctime": "2025-07-22 21:06:53,315", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: user_id=414ed6ae-a2aa-4548-b73a-66ce240c0089, route=/api/appointments, method=GET, company_code=LNV"}
{"asctime": "2025-07-22 21:06:54,048", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=True count=None"}
{"asctime": "2025-07-22 21:06:54,050", "levelname": "ERROR", "name": "service.user_access", "message": "\ud83d\udd25 Exception occurred in check_access: 'SingleAPIResponse[TypeVar]' object has no attribute 'status_code'", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Projects\\TH-WelnessSystems\\app\\api\\v1\\users\\check_access.py\", line 45, in check_access\n    if response.status_code != 200:\n       ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Projects\\TH-WelnessSystems\\venv\\Lib\\site-packages\\pydantic\\main.py\", line 989, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\nAttributeError: 'SingleAPIResponse[TypeVar]' object has no attribute 'status_code'"}
{"asctime": "2025-07-22 21:13:19,462", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: user_id=414ed6ae-a2aa-4548-b73a-66ce240c0089, route=/api/appointments, method=GET, company_code=LNV"}
{"asctime": "2025-07-22 21:13:20,124", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=True"}
{"asctime": "2025-07-22 21:25:43,565", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: user_id=414ed6ae-a2aa-4548-b73a-66ce240c0089, route=/api/appointments, method=GET, company_code=LNV"}
{"asctime": "2025-07-22 21:25:44,095", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=True"}
{"asctime": "2025-07-23 17:16:40,557", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: user_id=193ec369-ce5a-4a88-a73e-907feabc3d7c, route=/api/v1/companies/update-by-code, method=PUT, company_code=LNV"}
{"asctime": "2025-07-23 17:16:41,790", "levelname": "ERROR", "name": "service.user_access", "message": "\ud83d\udd25 Exception occurred in check_access: {'code': 'PGRST202', 'details': 'Searched for the function public.check_access with parameters p_company_code, p_method, p_route, p_user_id or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': 'Perhaps you meant to call the function public.check_access(p_company_code, p_method, p_profile_id, p_route)', 'message': 'Could not find the function public.check_access(p_company_code, p_method, p_route, p_user_id) in the schema cache'}", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Projects\\TH-WelnessSystems\\app\\api\\v1\\users\\check_access.py\", line 41, in check_access\n    }).execute()\n       ^^^^^^^^^\n  File \"C:\\Projects\\TH-WelnessSystems\\venv\\Lib\\site-packages\\postgrest\\_sync\\request_builder.py\", line 127, in execute\n    raise APIError(r.json())\npostgrest.exceptions.APIError: {'code': 'PGRST202', 'details': 'Searched for the function public.check_access with parameters p_company_code, p_method, p_route, p_user_id or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': 'Perhaps you meant to call the function public.check_access(p_company_code, p_method, p_profile_id, p_route)', 'message': 'Could not find the function public.check_access(p_company_code, p_method, p_route, p_user_id) in the schema cache'}"}
{"asctime": "2025-07-23 17:23:53,696", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: profile_id=193ec369-ce5a-4a88-a73e-907feabc3d7c, route=/api/v1/companies/update-by-code, method=PUT, company_code=LNV"}
{"asctime": "2025-07-23 17:23:54,690", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=True"}
{"asctime": "2025-07-23 17:24:11,291", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: profile_id=193ec369-ce5a-4a88-a73e-907feabc3d7c, route=/api/v1/companies/update-by-code, method=GETT, company_code=LNV"}
{"asctime": "2025-07-23 17:24:11,639", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=False"}
{"asctime": "2025-07-23 17:24:29,519", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: profile_id=193ec369-ce5a-4a88-a73e-907feabc3d7c, route=/api/v1/companies/update-by-code, method=PUT, company_code=LNV"}
{"asctime": "2025-07-23 17:24:30,093", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=True"}
{"asctime": "2025-07-24 13:12:29,307", "levelname": "INFO", "name": "service.user_access", "message": "\ud83d\udce5 Received check_access request: profile_id=3fa85f64-5717-4562-b3fc-2c963f66afa6, route=string, method=string, company_code=string"}
{"asctime": "2025-07-24 13:12:29,711", "levelname": "INFO", "name": "service.user_access", "message": "\u2705 Supabase RPC response: data=False"}
